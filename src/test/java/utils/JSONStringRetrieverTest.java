package utils;

import org.junit.jupiter.api.Test;

import java.io.IOException;

import static org.junit.jupiter.api.Assertions.*;

class JSONStringRetrieverTest {

    @Test
    void getJSONstring() throws IOException {
        String j1 = new JSONStringRetriever("Soup").getJSONstring();
        assertEquals("{\"continue\":{\"rvcontinue\":\"20190327104843|889697318\",\"continue\":\"||\"},\"query\":{\"pages\":{\"19651298\":{\"pageid\":19651298,\"ns\":0,\"title\":\"Soup\",\"revisions\":[{\"user\":\"InternetArchiveBot\",\"timestamp\":\"2020-02-24T17:26:22Z\"},{\"user\":\"Yunshui\",\"timestamp\":\"2020-02-09T12:48:23Z\"},{\"user\":\"Otuo-Akyampong Boakye\",\"timestamp\":\"2020-02-08T16:49:19Z\"},{\"user\":\"Otuo-Akyampong Boakye\",\"timestamp\":\"2020-02-08T16:48:49Z\"},{\"user\":\"Otuo-Akyampong Boakye\",\"timestamp\":\"2020-02-08T16:47:36Z\"},{\"user\":\"AnomieBOT\",\"timestamp\":\"2019-11-28T06:58:48Z\"},{\"user\":\"Esoteric bearcat\",\"timestamp\":\"2019-11-28T04:58:37Z\"},{\"user\":\"Esoteric bearcat\",\"timestamp\":\"2019-11-28T04:50:07Z\"},{\"user\":\"Rmhermen\",\"timestamp\":\"2019-11-04T17:21:04Z\"},{\"user\":\"Mitchellhobbs\",\"timestamp\":\"2019-10-12T23:10:46Z\"},{\"user\":\"Monkbot\",\"timestamp\":\"2019-09-25T01:11:16Z\"},{\"user\":\"Anfecaro\",\"timestamp\":\"2019-08-16T00:28:36Z\"},{\"user\":\"BrownHairedGirl\",\"timestamp\":\"2019-07-14T13:34:25Z\"},{\"user\":\"Mtpaley\",\"timestamp\":\"2019-06-30T11:21:25Z\"},{\"user\":\"James Bowes\",\"timestamp\":\"2019-06-30T08:09:36Z\"},{\"user\":\"Unknown19871\",\"timestamp\":\"2019-06-09T23:52:43Z\"},{\"user\":\"RexxS\",\"timestamp\":\"2019-06-06T22:12:01Z\"},{\"user\":\"Undecillion\",\"timestamp\":\"2019-05-28T17:22:17Z\"},{\"user\":\"Rmhermen\",\"timestamp\":\"2019-05-18T23:23:06Z\"},{\"user\":\"Tbhotch\",\"timestamp\":\"2019-04-07T06:19:17Z\"},{\"user\":\"Tbhotch\",\"timestamp\":\"2019-04-07T06:18:33Z\"},{\"user\":\"MarnetteD\",\"timestamp\":\"2019-04-05T04:49:29Z\"},{\"user\":\"MarnetteD\",\"timestamp\":\"2019-04-05T02:55:29Z\"},{\"user\":\"Materialscientist\",\"timestamp\":\"2019-03-27T21:59:45Z\"},{\"user\":\"Materialscientist\",\"timestamp\":\"2019-03-27T21:59:44Z\"},{\"user\":\"Kleuske\",\"timestamp\":\"2019-03-27T10:51:22Z\"},{\"user\":\"123MaxRick\",\"timestamp\":\"2019-03-27T10:51:16Z\"},{\"user\":\"Shellwood\",\"timestamp\":\"2019-03-27T10:49:48Z\"},{\"user\":\"123MaxRick\",\"timestamp\":\"2019-03-27T10:49:33Z\"},{\"user\":\"Kleuske\",\"timestamp\":\"2019-03-27T10:49:01Z\"}]}}}}", j1);
    }

    @Test
    void getJSONstring_Empty() throws IOException {
        String j1 = new JSONStringRetriever("").getJSONstring(); //Empty
        System.out.println(new JSONStringRetriever("").getJSONstring());
        assertEquals("{\"batchcomplete\":\"\"}", j1);
    }

    @Test
    void getJSONstring_Uppercase() throws IOException {
        String j1 = new JSONStringRetriever("SOUP").getJSONstring(); //Uppercase
        assertEquals("{\"continue\":{\"rvcontinue\":\"20130514080035|555020216\",\"continue\":\"||\"},\"query\":{\"redirects\":[{\"from\":\"SOUP\",\"to\":\"Soup (disambiguation)\"}],\"pages\":{\"1331425\":{\"pageid\":1331425,\"ns\":0,\"title\":\"Soup (disambiguation)\",\"revisions\":[{\"user\":\"Froid\",\"timestamp\":\"2019-04-14T15:56:11Z\"},{\"user\":\"Flooded with them hundreds\",\"timestamp\":\"2018-12-19T14:51:34Z\"},{\"user\":\"2600:1017:B428:FB2F:B440:1390:C3AD:A202\",\"anon\":\"\",\"timestamp\":\"2018-12-19T14:50:50Z\"},{\"user\":\"Intgr\",\"timestamp\":\"2018-02-22T09:41:21Z\"},{\"user\":\"2600:8805:9200:19F0:A47A:9C2D:A6C3:CA63\",\"anon\":\"\",\"timestamp\":\"2018-02-22T01:13:07Z\"},{\"user\":\"2600:8805:9200:19F0:A47A:9C2D:A6C3:CA63\",\"anon\":\"\",\"timestamp\":\"2018-02-22T01:12:53Z\"},{\"user\":\"Dispenser\",\"timestamp\":\"2017-09-26T14:17:36Z\"},{\"user\":\"168.69.254.246\",\"anon\":\"\",\"timestamp\":\"2017-09-13T15:50:56Z\"},{\"user\":\"168.69.254.246\",\"anon\":\"\",\"timestamp\":\"2017-09-13T15:50:20Z\"},{\"user\":\"24.192.201.47\",\"anon\":\"\",\"timestamp\":\"2017-08-12T01:08:10Z\"},{\"user\":\"24.192.201.47\",\"anon\":\"\",\"timestamp\":\"2017-08-12T01:08:00Z\"},{\"user\":\"24.192.201.47\",\"anon\":\"\",\"timestamp\":\"2017-08-12T01:07:45Z\"},{\"user\":\"Froid\",\"timestamp\":\"2017-07-05T05:12:55Z\"},{\"user\":\"Narky Blert\",\"timestamp\":\"2017-04-24T10:42:37Z\"},{\"user\":\"Gjs238\",\"timestamp\":\"2017-03-17T22:11:56Z\"},{\"user\":\"Mean as custard\",\"timestamp\":\"2017-03-16T17:22:25Z\"},{\"user\":\"Janejane234\",\"timestamp\":\"2017-03-16T16:48:20Z\"},{\"user\":\"William M. Bugbee\",\"timestamp\":\"2017-02-10T15:07:26Z\"},{\"user\":\"Ptregan\",\"timestamp\":\"2017-01-11T18:02:07Z\"},{\"user\":\"Ptregan\",\"timestamp\":\"2017-01-11T18:01:00Z\"},{\"user\":\"Zeno Gantner\",\"timestamp\":\"2016-10-19T08:09:22Z\"},{\"user\":\"172.192.22.45\",\"anon\":\"\",\"timestamp\":\"2016-09-12T15:26:01Z\"},{\"user\":\"CarbonCRN\",\"timestamp\":\"2016-08-05T13:39:17Z\"},{\"user\":\"CarbonCRN\",\"timestamp\":\"2016-08-05T13:37:35Z\"},{\"user\":\"D. Benjamin Miller\",\"timestamp\":\"2016-07-05T18:13:31Z\"},{\"user\":\"D. Benjamin Miller\",\"timestamp\":\"2016-07-05T18:13:19Z\"},{\"user\":\"TJRC\",\"timestamp\":\"2015-08-14T22:05:19Z\"},{\"user\":\"Jandalhandler\",\"timestamp\":\"2015-05-06T21:45:20Z\"},{\"user\":\"Maury Markowitz\",\"timestamp\":\"2015-01-21T18:03:41Z\"},{\"user\":\"Tassedethe\",\"timestamp\":\"2014-12-28T20:13:01Z\"}]}}}}", j1);

    }

    @Test
    void getJSONstring_Lowercase() throws IOException {
        String j1 = new JSONStringRetriever("soup").getJSONstring(); //Lowercase
        assertEquals("{\"continue\":{\"rvcontinue\":\"20190327104843|889697318\",\"continue\":\"||\"},\"query\":{\"normalized\":[{\"from\":\"soup\",\"to\":\"Soup\"}],\"pages\":{\"19651298\":{\"pageid\":19651298,\"ns\":0,\"title\":\"Soup\",\"revisions\":[{\"user\":\"InternetArchiveBot\",\"timestamp\":\"2020-02-24T17:26:22Z\"},{\"user\":\"Yunshui\",\"timestamp\":\"2020-02-09T12:48:23Z\"},{\"user\":\"Otuo-Akyampong Boakye\",\"timestamp\":\"2020-02-08T16:49:19Z\"},{\"user\":\"Otuo-Akyampong Boakye\",\"timestamp\":\"2020-02-08T16:48:49Z\"},{\"user\":\"Otuo-Akyampong Boakye\",\"timestamp\":\"2020-02-08T16:47:36Z\"},{\"user\":\"AnomieBOT\",\"timestamp\":\"2019-11-28T06:58:48Z\"},{\"user\":\"Esoteric bearcat\",\"timestamp\":\"2019-11-28T04:58:37Z\"},{\"user\":\"Esoteric bearcat\",\"timestamp\":\"2019-11-28T04:50:07Z\"},{\"user\":\"Rmhermen\",\"timestamp\":\"2019-11-04T17:21:04Z\"},{\"user\":\"Mitchellhobbs\",\"timestamp\":\"2019-10-12T23:10:46Z\"},{\"user\":\"Monkbot\",\"timestamp\":\"2019-09-25T01:11:16Z\"},{\"user\":\"Anfecaro\",\"timestamp\":\"2019-08-16T00:28:36Z\"},{\"user\":\"BrownHairedGirl\",\"timestamp\":\"2019-07-14T13:34:25Z\"},{\"user\":\"Mtpaley\",\"timestamp\":\"2019-06-30T11:21:25Z\"},{\"user\":\"James Bowes\",\"timestamp\":\"2019-06-30T08:09:36Z\"},{\"user\":\"Unknown19871\",\"timestamp\":\"2019-06-09T23:52:43Z\"},{\"user\":\"RexxS\",\"timestamp\":\"2019-06-06T22:12:01Z\"},{\"user\":\"Undecillion\",\"timestamp\":\"2019-05-28T17:22:17Z\"},{\"user\":\"Rmhermen\",\"timestamp\":\"2019-05-18T23:23:06Z\"},{\"user\":\"Tbhotch\",\"timestamp\":\"2019-04-07T06:19:17Z\"},{\"user\":\"Tbhotch\",\"timestamp\":\"2019-04-07T06:18:33Z\"},{\"user\":\"MarnetteD\",\"timestamp\":\"2019-04-05T04:49:29Z\"},{\"user\":\"MarnetteD\",\"timestamp\":\"2019-04-05T02:55:29Z\"},{\"user\":\"Materialscientist\",\"timestamp\":\"2019-03-27T21:59:45Z\"},{\"user\":\"Materialscientist\",\"timestamp\":\"2019-03-27T21:59:44Z\"},{\"user\":\"Kleuske\",\"timestamp\":\"2019-03-27T10:51:22Z\"},{\"user\":\"123MaxRick\",\"timestamp\":\"2019-03-27T10:51:16Z\"},{\"user\":\"Shellwood\",\"timestamp\":\"2019-03-27T10:49:48Z\"},{\"user\":\"123MaxRick\",\"timestamp\":\"2019-03-27T10:49:33Z\"},{\"user\":\"Kleuske\",\"timestamp\":\"2019-03-27T10:49:01Z\"}]}}}}", j1);
    }

    @Test
    void getJSONstring_Short_Word() throws IOException {
        String j1 = new JSONStringRetriever("a").getJSONstring();
        assertEquals("{\"continue\":{\"rvcontinue\":\"20190719202553|907008348\",\"continue\":\"||\"},\"query\":{\"normalized\":[{\"from\":\"a\",\"to\":\"A\"}],\"pages\":{\"290\":{\"pageid\":290,\"ns\":0,\"title\":\"A\",\"revisions\":[{\"user\":\"Pppery\",\"timestamp\":\"2020-02-16T14:56:45Z\"},{\"user\":\"Finnigami\",\"timestamp\":\"2020-02-14T00:24:37Z\"},{\"user\":\"Finnigami\",\"timestamp\":\"2020-02-14T00:23:59Z\"},{\"user\":\"Finnigami\",\"timestamp\":\"2020-02-14T00:23:35Z\"},{\"user\":\"InternetArchiveBot\",\"timestamp\":\"2019-12-18T23:03:53Z\"},{\"user\":\"Natyoto\",\"timestamp\":\"2019-11-20T10:55:06Z\"},{\"user\":\"Natyoto\",\"timestamp\":\"2019-11-20T10:54:50Z\"},{\"user\":\"Kwamikagami\",\"timestamp\":\"2019-11-14T00:44:05Z\"},{\"user\":\"Kwamikagami\",\"timestamp\":\"2019-11-14T00:19:04Z\"},{\"user\":\"Kwamikagami\",\"timestamp\":\"2019-11-14T00:03:39Z\"},{\"user\":\"Kwamikagami\",\"timestamp\":\"2019-11-14T00:03:01Z\"},{\"user\":\"Kwamikagami\",\"timestamp\":\"2019-11-13T19:41:25Z\"},{\"user\":\"Kwamikagami\",\"timestamp\":\"2019-11-13T19:20:21Z\"},{\"user\":\"Kwamikagami\",\"timestamp\":\"2019-11-13T19:18:10Z\"},{\"user\":\"JalenFolf\",\"timestamp\":\"2019-11-11T18:22:44Z\"},{\"user\":\"Abdi maxamed\",\"timestamp\":\"2019-11-11T18:07:59Z\"},{\"user\":\"Abdi maxamed\",\"timestamp\":\"2019-11-11T18:06:21Z\"},{\"user\":\"Mx. Granger\",\"timestamp\":\"2019-10-29T05:41:23Z\"},{\"user\":\"BQUB19 FNavarro\",\"timestamp\":\"2019-10-27T17:02:58Z\"},{\"user\":\"Kclibrarian\",\"timestamp\":\"2019-10-22T21:01:27Z\"},{\"user\":\"FIGHTERSOVIET wpedia\",\"timestamp\":\"2019-10-19T03:24:28Z\"},{\"user\":\"I Am A Me Not A You\",\"timestamp\":\"2019-10-17T07:22:19Z\"},{\"user\":\"FIGHTERSOVIET wpedia\",\"timestamp\":\"2019-10-08T04:42:06Z\"},{\"user\":\"FIGHTERSOVIET wpedia\",\"timestamp\":\"2019-10-08T04:41:35Z\"},{\"user\":\"Mx. Granger\",\"timestamp\":\"2019-09-25T23:59:55Z\"},{\"user\":\"DumbFriesNub\",\"timestamp\":\"2019-09-25T02:55:58Z\"},{\"user\":\"Monkbot\",\"timestamp\":\"2019-09-10T17:25:04Z\"},{\"user\":\"InternetArchiveBot\",\"timestamp\":\"2019-09-07T17:35:08Z\"},{\"user\":\"Llew Mawr\",\"timestamp\":\"2019-09-07T11:13:21Z\"},{\"user\":\"Masumrezarock100\",\"timestamp\":\"2019-08-11T21:34:40Z\"}]}}}}",j1);
    }

    @Test
    void getJSONstring_Long_Word() throws IOException {
        String j1 = new JSONStringRetriever("Antidisestablishmentarianism").getJSONstring();
        assertEquals("{\"continue\":{\"rvcontinue\":\"20190202203753|881473585\",\"continue\":\"||\"},\"query\":{\"pages\":{\"18581389\":{\"pageid\":18581389,\"ns\":0,\"title\":\"Antidisestablishmentarianism\",\"revisions\":[{\"user\":\"Sodacan\",\"timestamp\":\"2020-01-30T04:21:25Z\"},{\"user\":\"Smjg\",\"timestamp\":\"2019-12-15T00:38:28Z\"},{\"user\":\"DistilledBacon\",\"timestamp\":\"2019-12-03T22:08:32Z\"},{\"user\":\"Daftwizard\",\"timestamp\":\"2019-12-03T22:08:13Z\"},{\"user\":\"BananaBork\",\"timestamp\":\"2019-11-28T20:13:35Z\"},{\"user\":\"2601:204:E280:A930:4976:975B:F87E:D301\",\"anon\":\"\",\"timestamp\":\"2019-11-21T04:22:57Z\"},{\"user\":\"2601:204:E280:A930:889C:3711:3CE9:4397\",\"anon\":\"\",\"timestamp\":\"2019-11-21T03:51:50Z\"},{\"user\":\"James-the-Charizard\",\"timestamp\":\"2019-10-19T17:15:22Z\"},{\"user\":\"79.67.204.90\",\"anon\":\"\",\"timestamp\":\"2019-10-19T17:15:06Z\"},{\"user\":\"James-the-Charizard\",\"timestamp\":\"2019-10-19T17:13:55Z\"},{\"user\":\"79.67.204.90\",\"anon\":\"\",\"timestamp\":\"2019-10-19T17:13:34Z\"},{\"user\":\"BrownHairedGirl\",\"timestamp\":\"2019-09-30T09:29:45Z\"},{\"user\":\"ClueBot NG\",\"timestamp\":\"2019-09-26T21:06:25Z\"},{\"user\":\"197.52.5.186\",\"anon\":\"\",\"timestamp\":\"2019-09-26T21:06:23Z\"},{\"user\":\"Tbhotch\",\"timestamp\":\"2019-07-03T20:23:55Z\"},{\"user\":\"Phleg1\",\"timestamp\":\"2019-06-17T03:26:44Z\"},{\"user\":\"2 Fuccmg\",\"timestamp\":\"2019-06-17T03:24:25Z\"},{\"user\":\"ClueBot NG\",\"timestamp\":\"2019-05-22T05:31:50Z\"},{\"user\":\"50.27.249.3\",\"anon\":\"\",\"timestamp\":\"2019-05-22T05:31:47Z\"},{\"user\":\"A lad insane\",\"timestamp\":\"2019-04-24T21:25:44Z\"},{\"user\":\"2604:2D80:4436:969B:1573:AA34:C665:F60C\",\"anon\":\"\",\"timestamp\":\"2019-04-24T21:23:24Z\"},{\"user\":\"Brainulator9\",\"timestamp\":\"2019-03-30T13:37:10Z\"},{\"user\":\"Serols\",\"timestamp\":\"2019-03-10T10:47:17Z\"},{\"user\":\"2600:100F:B018:16A:45A3:647C:DA4A:7D3D\",\"anon\":\"\",\"timestamp\":\"2019-03-10T10:47:04Z\"},{\"user\":\"Abelmoschus Esculentus\",\"timestamp\":\"2019-02-19T12:41:16Z\"},{\"user\":\"82.132.219.129\",\"anon\":\"\",\"timestamp\":\"2019-02-19T12:40:48Z\"},{\"user\":\"Horst Hof\",\"timestamp\":\"2019-02-19T12:36:48Z\"},{\"user\":\"82.132.219.129\",\"anon\":\"\",\"timestamp\":\"2019-02-19T12:36:15Z\"},{\"user\":\"ClueBot NG\",\"timestamp\":\"2019-02-19T12:34:54Z\"},{\"user\":\"82.132.219.129\",\"anon\":\"\",\"timestamp\":\"2019-02-19T12:34:47Z\"}]}}}}",j1);
    }

}